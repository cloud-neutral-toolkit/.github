{
  "apiVersion": "serving.knative.dev/v1",
  "kind": "Service",
  "metadata": {
    "annotations": {
      "run.googleapis.com/client-name": "gcloud",
      "run.googleapis.com/client-version": "554.0.0",
      "run.googleapis.com/ingress": "all",
      "run.googleapis.com/ingress-status": "all",
      "run.googleapis.com/maxScale": "20",
      "run.googleapis.com/operation-id": "9f5db56e-91bb-4bf3-80c6-afc8c734bcea",
      "run.googleapis.com/urls": "[\"https://accounts-svc-plus-266500572462.asia-northeast1.run.app\",\"https://accounts-svc-plus-pztvwzbmpq-an.a.run.app\"]",
      "serving.knative.dev/creator": "haitaopanhq@gmail.com",
      "serving.knative.dev/lastModifier": "266500572462-compute@developer.gserviceaccount.com"
    },
    "creationTimestamp": "2026-01-21T07:30:18.219865Z",
    "generation": 59,
    "labels": {
      "cloud.googleapis.com/location": "asia-northeast1",
      "commit-sha": "b3e7243992a1ed98c03b62b3d9c61335969779f1",
      "gcb-build-id": "5a556c24-ca04-48ea-b838-8d92c826762e",
      "gcb-trigger-id": "f3a71b58-1099-464c-b93f-c02fc0096482",
      "managed-by": "gcp-cloud-build-deploy-cloud-run"
    },
    "name": "accounts-svc-plus",
    "namespace": "266500572462",
    "resourceVersion": "AAZJh9l9wpE",
    "selfLink": "/apis/serving.knative.dev/v1/namespaces/266500572462/services/accounts-svc-plus",
    "uid": "3da8f202-ba3b-45ac-ba10-cf8d7fe4e8bd"
  },
  "spec": {
    "template": {
      "metadata": {
        "annotations": {
          "autoscaling.knative.dev/maxScale": "20",
          "run.googleapis.com/client-name": "gcloud",
          "run.googleapis.com/client-version": "554.0.0",
          "run.googleapis.com/startup-cpu-boost": "true"
        },
        "labels": {
          "client.knative.dev/nonce": "rewzwgmhaz",
          "commit-sha": "b3e7243992a1ed98c03b62b3d9c61335969779f1",
          "gcb-build-id": "5a556c24-ca04-48ea-b838-8d92c826762e",
          "gcb-trigger-id": "f3a71b58-1099-464c-b93f-c02fc0096482",
          "managed-by": "gcp-cloud-build-deploy-cloud-run",
          "run.googleapis.com/startupProbeType": "Default"
        }
      },
      "spec": {
        "containerConcurrency": 80,
        "containers": [
          {
            "env": [
              {
                "name": "CONFIG_TEMPLATE",
                "value": "/app/config/account.cloudrun.yaml"
              },
              {
                "name": "PGADMIN_PASSWORD",
                "value": "admin_password"
              },
              {
                "name": "DB_PASSWORD",
                "valueFrom": {
                  "secretKeyRef": {
                    "key": "latest",
                    "name": "postgres-password"
                  }
                }
              },
              {
                "name": "POSTGRES_PASSWORD",
                "valueFrom": {
                  "secretKeyRef": {
                    "key": "latest",
                    "name": "postgres-password"
                  }
                }
              },
              {
                "name": "DB_HOST",
                "value": "127.0.0.1"
              },
              {
                "name": "DB_PORT",
                "value": "15432"
              },
              {
                "name": "DB_USER",
                "value": "postgres"
              },
              {
                "name": "POSTGRES_USER",
                "value": "postgres"
              },
              {
                "name": "DB_NAME",
                "value": "account"
              },
              {
                "name": "SMTP_HOST",
                "value": "smtp.qq.com"
              },
              {
                "name": "SMTP_PORT",
                "value": "587"
              },
              {
                "name": "SMTP_FROM",
                "value": "XControl Account <manbuzhe2009@qq.com>"
              },
              {
                "name": "SMTP_USERNAME",
                "valueFrom": {
                  "secretKeyRef": {
                    "key": "latest",
                    "name": "smtp-username"
                  }
                }
              },
              {
                "name": "SMTP_PASSWORD",
                "valueFrom": {
                  "secretKeyRef": {
                    "key": "latest",
                    "name": "smtp-password"
                  }
                }
              }
            ],
            "image": "asia-northeast1-docker.pkg.dev/xzerolab-480008/cloud-run-source-deploy/accounts.svc.plus/accounts-svc-plus:b3e7243992a1ed98c03b62b3d9c61335969779f1",
            "name": "accounts-api",
            "ports": [
              {
                "containerPort": 8080,
                "name": "http1"
              }
            ],
            "resources": {
              "limits": {
                "cpu": "1000m",
                "memory": "512Mi"
              }
            },
            "startupProbe": {
              "failureThreshold": 1,
              "periodSeconds": 240,
              "tcpSocket": {
                "port": 8080
              },
              "timeoutSeconds": 240
            }
          },
          {
            "command": [
              "stunnel",
              "/etc/stunnel/stunnel.conf"
            ],
            "image": "dweomer/stunnel",
            "name": "stunnel-sidecar",
            "resources": {
              "limits": {
                "cpu": "200m",
                "memory": "128Mi"
              }
            },
            "volumeMounts": [
              {
                "mountPath": "/etc/stunnel",
                "name": "stunnel-conf-vol"
              }
            ]
          }
        ],
        "serviceAccountName": "266500572462-compute@developer.gserviceaccount.com",
        "timeoutSeconds": 300,
        "volumes": [
          {
            "name": "stunnel-conf-vol",
            "secret": {
              "items": [
                {
                  "key": "latest",
                  "path": "stunnel.conf"
                }
              ],
              "secretName": "stunnel-config"
            }
          }
        ]
      }
    },
    "traffic": [
      {
        "latestRevision": true,
        "percent": 100
      }
    ]
  },
  "status": {
    "address": {
      "url": "https://accounts-svc-plus-pztvwzbmpq-an.a.run.app"
    },
    "conditions": [
      {
        "lastTransitionTime": "2026-01-29T14:41:18.574225Z",
        "status": "True",
        "type": "Ready"
      },
      {
        "lastTransitionTime": "2026-01-29T14:41:13.466503Z",
        "status": "True",
        "type": "ConfigurationsReady"
      },
      {
        "lastTransitionTime": "2026-01-29T14:41:18.541986Z",
        "status": "True",
        "type": "RoutesReady"
      }
    ],
    "latestCreatedRevisionName": "accounts-svc-plus-00053-q6z",
    "latestReadyRevisionName": "accounts-svc-plus-00053-q6z",
    "observedGeneration": 59,
    "traffic": [
      {
        "latestRevision": true,
        "percent": 100,
        "revisionName": "accounts-svc-plus-00053-q6z"
      }
    ],
    "url": "https://accounts-svc-plus-pztvwzbmpq-an.a.run.app"
  }
}
